Aqu√≠ tienes **TODO tu `index.html` ya corregido** (Mermaid sin errores, mindmaps renderizando, y re-render autom√°tico por slide en Reveal). Solo reemplaza tu archivo actual por este:

> ‚úÖ Cambios clave:
>
> * Todos los diagramas Mermaid ahora est√°n en `<pre class="mermaid">...</pre>`
> * Labels con `"<br/>"` van entre comillas `["..."]`
> * Se agrega script para **render Mermaid en `ready` + `slidechanged`**

```html
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LRBA en Ether ‚Äî Presentaci√≥n interactiva</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- Reveal.js -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/black.css">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.0.3/src/regular/style.css">

  <!-- Custom -->
  <link rel="stylesheet" href="assets/styles.css" />
</head>

<body>
  <div class="topbar">
    <div class="brand">
      <span class="dot"></span>
      <span class="title">LRBA ¬∑ Ether</span>
      <span class="badge">Interactive deck</span>
    </div>
    <div class="topbar-right">
      <button class="ghost" id="btn-outline" title="Modo lectura">Outline</button>
      <button class="ghost" id="btn-help" title="Ayuda">Controles</button>
    </div>
  </div>

  <div class="reveal">
    <div class="slides">

      <!-- 1 -->
      <section data-background-gradient="radial-gradient(circle at 20% 10%, rgba(64,122,255,.35), transparent 55%), radial-gradient(circle at 70% 40%, rgba(0,255,204,.18), transparent 55%), linear-gradient(135deg, #061526, #040b14 60%, #00040a)">
        <div class="hero">
          <div class="kicker">Presentaci√≥n t√©cnica</div>
          <h1>LRBA <span class="muted">‚Äî Lightweight Runtime Architecture for Batch</span></h1>
          <p class="lead">
            C√≥mo se ubica en <b>Ether</b>, c√≥mo se dise√±a un <b>Job Spark</b> (Builder/Transformer),
            su <b>ciclo de vida</b>, persistencias (BTS/DB), seguridad, operaci√≥n y buenas pr√°cticas.
          </p>

          <div class="hero-cards">
            <div class="mini-card">
              <div class="mini-title"><i class="ph ph-lightning"></i> Objetivo</div>
              <div class="mini-body">Explicar LRBA ‚Äúend-to-end‚Äù para una exposici√≥n de ~20 min.</div>
            </div>
            <div class="mini-card">
              <div class="mini-title"><i class="ph ph-stack"></i> Enfoque</div>
              <div class="mini-body">Arquitectura Ether + LRBA Spark + Operaci√≥n (scheduler/monitoreo).</div>
            </div>
            <div class="mini-card">
              <div class="mini-title"><i class="ph ph-code"></i> Formato</div>
              <div class="mini-body">Slides, diagramas Mermaid, toggles ‚Äú+info‚Äù, mini-quiz.</div>
            </div>
          </div>

          <div class="footer-hint">
            <span>‚¨ÖÔ∏è‚û°Ô∏è navegar ¬∑ ‚¨ÜÔ∏è‚¨áÔ∏è profundidad ¬∑ <kbd>F</kbd> fullscreen ¬∑ <kbd>S</kbd> speaker notes</span>
          </div>
        </div>
        <aside class="notes">
          Abre con el contexto: LRBA es el runtime de Ether para batch. Explica que veremos arquitectura,
          ciclo de vida, componentes, persistencias y operaci√≥n.
        </aside>
      </section>

      <!-- 2 -->
      <section>
        <h2>Agenda (ruta de 20 minutos)</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-map-trifold"></i> Macro</div>
            <ol class="compact">
              <li>Qu√© es LRBA y por qu√© existe</li>
              <li>Ether: capas y jerarqu√≠a</li>
              <li>Tipos: LRBA Spark vs Lite</li>
              <li>Componentes: Builder/Transformer</li>
              <li>Ciclo de vida y DAG</li>
            </ol>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-gear-six"></i> Operaci√≥n</div>
            <ol class="compact" start="6">
              <li>Persistencias: BTS, DB2/Oracle, Mongo/Elastic</li>
              <li>Seguridad, alias y servicios</li>
              <li>Scaffold/estructura de proyecto</li>
              <li>Buenas pr√°cticas / antipatr√≥nes</li>
              <li>Mini-quiz + cierre</li>
            </ol>
          </div>
        </div>
        <aside class="notes">
          Marca tiempo aproximado: 2 min contexto, 3 min arquitectura, 5 min componentes,
          5 min ciclo vida+Spark, 3 min persistencias+seguridad, 2 min buenas pr√°cticas+quiz.
        </aside>
      </section>

      <!-- 3 -->
      <section>
        <h2>¬øQu√© es LRBA?</h2>
        <div class="callout">
          <div class="callout-title">Definici√≥n</div>
          <p>
            <b>LRBA</b> (Lightweight Runtime Architecture for Batch) es un <b>runtime en Ether</b> para implementar
            procesos <b>batch</b> que complementa motores existentes (ej. APX Batch).
          </p>
        </div>

        <div class="grid-3">
          <div class="card">
            <div class="card-title"><i class="ph ph-cube"></i> Principio</div>
            <p>Corre sobre <b>IaaS Nextgen (x86)</b> y <b>PaaS de contenedores</b>.</p>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-rocket"></i> Ligereza</div>
            <p>Modelo de ejecuci√≥n ligero apoyado en frameworks open-source (Spark).</p>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-shield-check"></i> Gobierno</div>
            <p>Seguridad, monitorizaci√≥n, control de errores y trazabilidad integrados.</p>
          </div>
        </div>

        <details class="more">
          <summary>+info ¬∑ ¬øpor qu√© ‚Äúruntime‚Äù y no solo librer√≠a?</summary>
          <p>
            Porque LRBA define el <b>flujo de ejecuci√≥n</b>, integra <b>scheduler</b>, <b>monitoreo</b>,
            acceso a persistencias y seguridad. Tu c√≥digo aporta la l√≥gica (Transformer) y la configuraci√≥n (Builder).
          </p>
        </details>
        <aside class="notes">
          Enfatiza: runtime = entorno + fases + integraci√≥n plataforma. No es ‚Äúun jar‚Äù.
        </aside>
      </section>

      <!-- 4 -->
      <section>
        <h2>¬øQu√© es un runtime en este contexto?</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-stack"></i> Lo que incluye</div>
            <ul class="compact">
              <li>Spark administrado (en LRBA Spark)</li>
              <li>Contenedores + orquestaci√≥n (PaaS)</li>
              <li>Seguridad y descubrimiento de recursos</li>
              <li>Configuraci√≥n est√°ndar y parametrizaci√≥n</li>
              <li>Scheduler + monitorizaci√≥n</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-target"></i> Tu responsabilidad</div>
            <ul class="compact">
              <li>Declarar fuentes y destinos (Builder)</li>
              <li>Transformar datos (Transformer / SQL)</li>
              <li>Respetar alias, reglas y buenas pr√°cticas</li>
            </ul>
            <div class="pill-row">
              <span class="pill">Builder = config</span>
              <span class="pill">Transformer = negocio</span>
              <span class="pill">LRBA = ejecuci√≥n</span>
            </div>
          </div>
        </div>
        <aside class="notes">
          Explica ‚Äúseparaci√≥n de responsabilidades‚Äù: plataforma vs app.
        </aside>
      </section>

      <!-- 5 -->
      <section>
        <h2>Ether: visi√≥n por capas</h2>
        <pre class="mermaid">
flowchart TB
  A["Aplicaciones<br/>(Jobs LRBA, APX, etc.)"]:::top
  B["Motores / Runtimes<br/>LRBA, APX, DataX..."]:::mid
  C["PaaS de Contenedores<br/>Orquestaci√≥n ¬∑ Escalamiento"]:::mid
  D["IaaS Nextgen (x86)<br/>Infraestructura base"]:::bot

  D --> C --> B --> A

  classDef top fill:#0b1b33,stroke:#3ea6ff,stroke-width:2,color:#eaf2ff;
  classDef mid fill:#071427,stroke:#2dd4bf,stroke-width:2,color:#eaf2ff;
  classDef bot fill:#040b14,stroke:#94a3b8,stroke-width:2,color:#eaf2ff;
        </pre>
        <details class="more">
          <summary>+info ¬∑ Qu√© aporta Ether adem√°s de ‚Äúinfra‚Äù</summary>
          <ul class="compact">
            <li>Servicios corporativos: seguridad, inventario l√≥gico de servicios, permisos.</li>
            <li>Persistencias y conectores (BTS, BD, NoSQL).</li>
            <li>Operaci√≥n: scheduler (Cronos/Control-M) y monitoreo (Atenea).</li>
          </ul>
        </details>
        <aside class="notes">
          Presenta Ether como la ‚Äúplataforma macro‚Äù. LRBA vive encima del PaaS.
        </aside>
      </section>

      <!-- 6 -->
      <section>
        <h2>Jerarqu√≠a: Ether ‚Üí LRBA ‚Üí Jobs</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-tree-structure"></i> Jerarqu√≠a conceptual</div>
            <pre class="mermaid">
graph TD
  E["ETHER (plataforma)"] --> I["IaaS + PaaS"]
  E --> S["Servicios: seguridad ¬∑ BTS ¬∑ BD ¬∑ monitoreo ¬∑ scheduler"]
  E --> M["Motores"]
  M --> L["LRBA (Spark / Lite / Batch)"]
  M --> A["APX y otros"]
  L --> J["Tus Jobs LRBA<br/>Builder + Transformer"]
            </pre>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-info"></i> Mensaje clave</div>
            <p>
              Un Job LRBA <b>no vive aislado</b>: corre dentro del runtime de Ether, y por eso
              hereda seguridad, conectividad y operaci√≥n est√°ndar.
            </p>
            <div class="quote">
              ‚ÄúTu c√≥digo describe y transforma; la plataforma orquesta y gobierna.‚Äù
            </div>
          </div>
        </div>
      </section>

      <!-- 7 -->
      <section>
        <h2>Tipos de LRBA</h2>
        <div class="grid-3">
          <div class="card">
            <div class="card-title"><i class="ph ph-database"></i> LRBA Spark</div>
            <ul class="compact">
              <li>Para <b>grandes datasets</b></li>
              <li>Procesamiento paralelo y en memoria</li>
              <li>ETL con SQL o Spark API (Datasets)</li>
            </ul>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-feather"></i> LRBA Lite</div>
            <ul class="compact">
              <li>M√°s simple / liviano</li>
              <li>Casos menos volum√©tricos</li>
              <li>Complementa necesidades batch</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-puzzle-piece"></i> Relaci√≥n con otros motores</div>
            <p>LRBA complementa motores existentes de Ether (ej. APX Batch).</p>
            <details class="mini">
              <summary>+info ¬∑ ¬øqu√© gana Spark?</summary>
              <p>Escalabilidad, paralelismo, memoria y DAG optimizado.</p>
            </details>
          </div>
        </div>
      </section>

      <!-- 8 -->
      <section>
        <h2>Mapa mental: LRBA Spark (qu√© toca)</h2>
        <pre class="mermaid">
mindmap
  root((LRBA Spark))
    Arquitectura
      Ether
      IaaS Nextgen
      PaaS Contenedores
      Servicios
        Seguridad
        Scheduler
        Monitoreo
    Desarrollo
      JobSparkBuilder
        registerSources
        registerTransform
        registerTargets
      Transformer
        Datasets
        SQL o Spark API
      Aliases
    Ejecuci√≥n
      Fases
        Setup
        Prepare Read
        Prepare Transformation
        Prepare Write
        Execute
      DAG
    Persistencias
      BTS (S3)
      Relacionales
        DB2
        Oracle
      NoSQL
        MongoDB
        ElasticSearch
        </pre>
        <aside class="notes">
          Este slide te ayuda a ‚Äúenganchar‚Äù al p√∫blico: muestra todo lo que se va a cubrir.
        </aside>
      </section>

      <!-- 9 -->
      <section>
        <h2>Componentes de un Job LRBA Spark</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-code"></i> Dos clases Java principales</div>
            <ul class="compact">
              <li><code>JobSparkBuilder</code> ‚Äî declara sources/targets y usa el Transformer.</li>
              <li><code>Transformer</code> ‚Äî implementa la l√≥gica de negocio / transformaci√≥n.</li>
            </ul>
            <details class="mini">
              <summary>+info ¬∑ qu√© significa ‚Äúabstraer persistencia‚Äù</summary>
              <p>
                El Builder declara <i>qu√©</i> leer/escribir y con qu√© alias; la ubicaci√≥n f√≠sica (tabla/archivo)
                se resuelve por configuraci√≥n y servicios.
              </p>
            </details>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-shapes"></i> Otros elementos</div>
            <ul class="compact">
              <li>Aliases (l√≥gicos)</li>
              <li>Sources / Targets (conectores)</li>
              <li>Componentes globales (utils, validadores, modelos)</li>
            </ul>
            <div class="pill-row">
              <span class="pill">Alias</span>
              <span class="pill">physicalName</span>
              <span class="pill">serviceName</span>
            </div>
          </div>
        </div>
      </section>

      <!-- 10 -->
      <section>
        <h2>El Builder: responsabilidades</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-wrench"></i> Builder = configuraci√≥n</div>
            <ul class="compact">
              <li>Registra fuentes y destinos del job.</li>
              <li>Declara c√≥mo se transforman los datos (Transformer Java o SQL).</li>
              <li>Se ejecuta ‚Äúlazy‚Äù cuando la fase lo requiere.</li>
            </ul>
            <details class="mini">
              <summary>+info ¬∑ Campos comunes en builders</summary>
              <ul class="compact">
                <li><b>alias</b>: nombre l√≥gico usado por Transformers</li>
                <li><b>physicalName</b>: tabla/colecci√≥n o ruta de archivo</li>
                <li><b>serviceName</b>: servicio creado en inventario l√≥gico</li>
              </ul>
            </details>
          </div>

          <div class="card subtle">
            <div class="card-title"><i class="ph ph-terminal-window"></i> Mini-snippet (conceptual)</div>
            <pre><code class="language-java">// Job[NAME]Builder (conceptual)
registerSources()  { /* alias + physicalName + serviceName */ }
registerTransform(){ /* Transformer Java o SQL */ }
registerTargets()  { /* targets con alias */ }</code></pre>
            <p class="muted small">El Builder describe. La ejecuci√≥n ocurre en fases del runtime.</p>
          </div>
        </div>
      </section>

      <!-- 11 -->
      <section>
        <h2>Sources y Targets soportados</h2>
        <div class="grid-3">
          <div class="card">
            <div class="card-title"><i class="ph ph-folder"></i> Archivos</div>
            <ul class="compact">
              <li>BTS</li>
              <li>Epsilon (deprecado)</li>
            </ul>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-database"></i> Relacionales</div>
            <ul class="compact">
              <li>Oracle</li>
              <li>DB2</li>
            </ul>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-cloud"></i> NoSQL</div>
            <ul class="compact">
              <li>MongoDB</li>
              <li>ElasticSearch</li>
            </ul>
          </div>
        </div>

        <details class="more">
          <summary>+info ¬∑ Targets adicionales</summary>
          <p>Adem√°s de lo anterior, tambi√©n puede existir destino tipo <code>SparkApiConnector</code>.</p>
        </details>
      </section>

      <!-- 12 -->
      <section>
        <h2>registerTransform: Java o SQL</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-code-block"></i> Transformer Java</div>
            <p>Cuando la l√≥gica es m√°s compleja: joins, reglas, validaciones, derivaciones, etc.</p>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-file-sql"></i> Transformer SQL (ETL)</div>
            <pre><code class="language-java">TransformConfig.SqlStatements.builder()
  .addSql("sourceAlias1", "TRANSFORM DATA SQL")
  .build();</code></pre>
            <p class="muted small">Si usas solo SQL, el Transformer Java puede eliminarse.</p>
          </div>
        </div>

        <details class="more">
          <summary>+info ¬∑ ¬øCu√°ndo puede retornar null?</summary>
          <p>
            Si el job es una copia directa origen‚Üídestino (1 source y 1 target) y ambos usan el mismo alias.
          </p>
        </details>
      </section>

      <!-- 13 -->
      <section>
        <h2>Transformer: contrato mental</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-arrows-left-right"></i> Entrada / salida por alias</div>
            <pre><code class="language-java">Map&lt;String, Dataset&lt;Row&gt;&gt; transform(
  Map&lt;String, Dataset&lt;Row&gt;&gt; datasetsFromRead
)</code></pre>
            <ul class="compact">
              <li>Entrada: <code>sourceAlias ‚Üí Dataset</code></li>
              <li>Salida: <code>targetAlias ‚Üí Dataset</code></li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-graph"></i> Aqu√≠ nace el DAG</div>
            <p>
              Al encadenar operaciones (select/filter/join/groupBy), Spark construye el
              <b>plan de ejecuci√≥n (DAG)</b> que se dispara en <b>Execute</b>.
            </p>
            <details class="mini">
              <summary>+info ¬∑ ‚Äúsolo una fase‚Äù</summary>
              <p>La fase de transformaci√≥n es la √∫nica donde accedes al Dataset ya cargado en memoria.</p>
            </details>
          </div>
        </div>
      </section>

      <!-- 14 -->
      <section>
        <h2>Datasets en LRBA Spark</h2>
        <div class="callout">
          <div class="callout-title">Dataset</div>
          <p>
            Un <b>dataset</b> es una colecci√≥n de datos <b>distribuidos</b>, con estructura, residente en memoria del proceso Spark.
            En LRBA Spark siempre se accede y transforma a trav√©s de <b>Datasets</b>.
          </p>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-bezier-curve"></i> Transformaciones</div>
            <ul class="compact">
              <li>Declarativas: <code>select</code>, <code>withColumn</code>, <code>join</code>, <code>groupBy</code></li>
              <li>Spark optimiza el plan antes de ejecutar</li>
              <li>Evitar loops con acciones sobre datasets</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-warning"></i> Nota importante</div>
            <p>Algunos m√©todos del API de Dataset no est√°n permitidos en LRBA.</p>
            <p class="muted small">Regla general: respeta el ‚Äúsubset‚Äù soportado por la plataforma.</p>
          </div>
        </div>
      </section>

      <!-- 15 -->
      <section>
        <h2>DAG (Directed Acyclic Graph) ‚Äî de la idea a la ejecuci√≥n</h2>
        <pre class="mermaid">
flowchart LR
  R["Read<br/>Sources"] --> T["Transform<br/>Dataset ops"]
  T --> W["Write<br/>Targets"]
  subgraph SparkPlan["Spark plan (DAG)"]
    R --> T --> W
  end
        </pre>
        <div class="grid-3">
          <div class="card"><div class="card-title"><i class="ph ph-cpu"></i> Stages</div><p>Divide el trabajo en etapas.</p></div>
          <div class="card"><div class="card-title"><i class="ph ph-swap"></i> Shuffles</div><p>Joins/agregaciones implican redistribuci√≥n.</p></div>
          <div class="card"><div class="card-title"><i class="ph ph-gauge"></i> Optimizaci√≥n</div><p>Reduce pasos y costos.</p></div>
        </div>
      </section>

      <!-- 16 -->
      <section>
        <h2>Ciclo de vida LRBA Spark (5 fases)</h2>
        <pre class="mermaid">
flowchart LR
  A["1 ¬∑ Setup"] --> B["2 ¬∑ Prepare Read"]
  B --> C["3 ¬∑ Prepare Transformation"]
  C --> D["4 ¬∑ Prepare Write"]
  D --> E["5 ¬∑ Execute"]
        </pre>

        <details class="more">
          <summary>+info ¬∑ ¬øqu√© pasa en cada fase?</summary>
          <ul class="compact">
            <li><b>Setup</b>: configura el ecosistema Spark (implementado por la arquitectura).</li>
            <li><b>Prepare Read</b>: prepara accesos y vincula sources con alias.</li>
            <li><b>Prepare Transformation</b>: prepara el plan (DAG) y ejecuta el Transformer.</li>
            <li><b>Prepare Write</b>: valida salidas y accesos; vincula targets con persistencia.</li>
            <li><b>Execute</b>: Spark ejecuta el DAG preparado.</li>
          </ul>
        </details>
      </section>

      <!-- 17 -->
      <section>
        <h2>Builder ‚Äúlazy‚Äù y ApplicationContext</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-hourglass-low"></i> Lazy execution</div>
            <p>
              Los m√©todos <code>registerSources()</code>, <code>registerTransform()</code> y <code>registerTargets()</code> se ejecutan
              de forma <b>lazy</b> cuando la fase lo requiere.
            </p>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-puzzle-piece"></i> ¬øPor qu√© importa?</div>
            <p>
              Puedes usar informaci√≥n de fases anteriores (v√≠a <b>ApplicationContext</b>) para parametrizar
              cosas como un <b>nombre de archivo din√°mico</b>.
            </p>
            <details class="mini">
              <summary>Ejemplo conceptual</summary>
              <p>Construir <code>physicalName</code> con <code>${oDate}</code> u otra fecha de ejecuci√≥n.</p>
            </details>
          </div>
        </div>
      </section>

      <!-- 18 -->
      <section>
        <h2>Parametrizaci√≥n: InputParams vs lrbaProperties</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-sliders"></i> InputParams (runtime)</div>
            <ul class="compact">
              <li>Par√°metros que var√≠an por ejecuci√≥n (enviados desde Control-M/Cronos)</li>
              <li>Ej.: fecha de ejecuci√≥n (<code>executionDate/oDate</code>), nombres de archivos (<code>physicalName</code>)</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-gear"></i> lrbaProperties (semi-permanentes)</div>
            <ul class="compact">
              <li>Configuraciones que cambian poco o dependen del despliegue</li>
              <li>Ej.: UA, pa√≠s, <code>serviceName</code> (BTS), URLs por entorno</li>
            </ul>
          </div>
        </div>
        <aside class="notes">
          Esto ayuda mucho en entrevista: diferencia ‚Äúparams de ejecuci√≥n‚Äù vs ‚Äúconfig de despliegue‚Äù.
        </aside>
      </section>

      <!-- 19 -->
      <section>
        <h2>Persistencias: BTS (S3 interno)</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-cloud-arrow-up"></i> Qu√© es BTS</div>
            <p>
              <b>Bucket Temporary Storage</b> soporta almacenamiento de objetos compatible con S3
              y cubre la necesidad de almacenamiento <b>temporal</b> (archivos intermedios entre jobs).
            </p>
            <div class="pill-row">
              <span class="pill">S3 API</span>
              <span class="pill">multi-tenancy</span>
              <span class="pill">alto rendimiento</span>
            </div>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-hard-drives"></i> Base tecnol√≥gica</div>
            <p>
              Se apoya en IaaS Storage con tecnolog√≠a <b>Scality Ring</b> / conector S3.
            </p>
            <details class="mini">
              <summary>Uso principal</summary>
              <p>Intercambio de datos entre procesos (no como persistencia final).</p>
            </details>
          </div>
        </div>
      </section>

      <!-- 20 -->
      <section>
        <h2>Persistencias: Bases de datos relacionales</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-database"></i> Soportadas</div>
            <ul class="compact">
              <li>DB2 en Mainframe</li>
              <li>Oracle Nextgen</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-arrow-u-up-right"></i> Usos principales</div>
            <ul class="compact">
              <li>Extracciones completas o incrementales (SQL simple por timestamp)</li>
              <li>Preservar recursos de BD transaccionales moviendo a BTS</li>
              <li>Carga <b>upsert</b> (insert/update)</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 21 -->
      <section>
        <h2>Persistencias: NoSQL</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-brackets-curly"></i> Soportadas</div>
            <ul class="compact">
              <li>MongoDB Nextgen</li>
              <li>ElasticSearch Nextgen</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-trend-up"></i> Uso t√≠pico</div>
            <p>Cargar datos provenientes de otras bases de datos / consolidaci√≥n.</p>
          </div>
        </div>
      </section>

      <!-- 22 -->
      <section>
        <h2>Seguridad: alias + servicios (sin credenciales en c√≥digo)</h2>
        <div class="callout">
          <div class="callout-title">Idea</div>
          <p>
            La conexi√≥n a la ubicaci√≥n f√≠sica de los datos (descubrimiento, seguridad, permisos) se gestiona por la arquitectura.
            Cada source/target tiene un <b>alias LRBA</b> y el acceso se resuelve con <b>serviceName</b> (inventario l√≥gico).
          </p>
        </div>

        <div class="grid-3">
          <div class="card">
            <div class="card-title"><i class="ph ph-tag"></i> alias</div>
            <p>Nombre l√≥gico usado por Transformers.</p>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-file-text"></i> physicalName</div>
            <p>Tabla/colecci√≥n o archivo f√≠sico.</p>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-link-simple"></i> serviceName</div>
            <p>Servicio registrado (inventario l√≥gico).</p>
          </div>
        </div>
      </section>

      <!-- 23 -->
      <section>
        <h2>Scaffold y estructura de proyecto</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-wand"></i> Scaffold (generaci√≥n)</div>
            <p>
              Se puede generar un job b√°sico desde la consola de Ether (Add resource),
              creando repositorio y base de proyecto.
            </p>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-folders"></i> Paquete est√°ndar</div>
            <p class="mono">com.bbva.[UUAA].[COUNTRY].jsprk.[JOBNAME].v[JOBVERSION]</p>
            <ul class="compact">
              <li><code>Job[JOBNAME]Builder.java</code></li>
              <li><code>Transformer.java</code> (si no es SQL-only)</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 24 -->
      <section>
        <h2>Convenciones y reglas (builder)</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-check-circle"></i> Reglas clave</div>
            <ul class="compact">
              <li>Implementar <code>registerSources()</code>, <code>registerTransform()</code>, <code>registerTargets()</code></li>
              <li>Debe existir al menos <b>un origen</b> y <b>un objetivo</b> registrado</li>
              <li>La info ‚Äúruntime‚Äù llega v√≠a <b>InputParams</b> o <b>LRBAProperties</b></li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-lightbulb"></i> Tip pr√°ctico</div>
            <p>
              No declares m√°s sources/targets de los que usar√°s.
              Si necesitas alternar objetivos, usa <b>if</b> dentro de los m√©todos register.
            </p>
            <details class="mini">
              <summary>+info ¬∑ copia directa</summary>
              <p>Si configuras bien source/target, <code>registerTransform()</code> puede retornar null para descarga directa.</p>
            </details>
          </div>
        </div>
      </section>

      <!-- 25 -->
      <section>
        <h2>Antipatr√≥n: loops sobre acciones del Dataset</h2>
        <div class="grid-2">
          <div class="card danger">
            <div class="card-title"><i class="ph ph-warning-octagon"></i> Antipatr√≥n</div>
            <p>Usar ciclos con acciones del dataset (ej. renombrar columnas en loop).</p>
            <p class="muted small">Spark no conoce el n√∫mero de invocaciones hasta runtime ‚Üí dificulta optimizaci√≥n.</p>
          </div>
          <div class="card ok">
            <div class="card-title"><i class="ph ph-check-square-offset"></i> Soluci√≥n</div>
            <ul class="compact">
              <li>Usa <code>.select()</code> para seleccionar y renombrar columnas en un paso</li>
              <li>O <code>withColumns()</code> para crear/alterar columnas con una sola llamada</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 26 -->
      <section>
        <h2>Antipatr√≥n: ‚Äúun dataset por operaci√≥n‚Äù</h2>
        <div class="grid-2">
          <div class="card danger">
            <div class="card-title"><i class="ph ph-bug"></i> Problema</div>
            <p>
              Guardar cada acci√≥n en una nueva variable puede multiplicar el uso de memoria
              (ej. 13 datasets temporales de 800MB).
            </p>
          </div>
          <div class="card ok">
            <div class="card-title"><i class="ph ph-leaf"></i> Enfoque recomendado</div>
            <ul class="compact">
              <li>Planear transformaciones primero (estructura Java/Scala)</li>
              <li>Aplicar la operaci√≥n en una sola acci√≥n del Dataset</li>
              <li>Menos datasets intermedios ‚Üí menos presi√≥n de memoria</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 27 -->
      <section>
        <h2>Herramientas √∫tiles (en c√≥digo)</h2>
        <div class="grid-3">
          <div class="card">
            <div class="card-title"><i class="ph ph-toolbox"></i> DatasetUtils</div>
            <ul class="compact">
              <li>Crear Datasets</li>
              <li>Registrar UDF</li>
              <li>Agregar/eliminar cache</li>
            </ul>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-function"></i> UDF</div>
            <p>Funciones personalizadas para Spark SQL cuando la l√≥gica se vuelve compleja.</p>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-folder-open"></i> Organizaci√≥n de archivos</div>
            <p>Ordenar entradas/salidas por contexto funcional, tabla y fecha (<code>oDate</code>).</p>
          </div>
        </div>
      </section>

      <!-- 28 -->
      <section>
        <h2>Nomenclatura sugerida de Jobs</h2>
        <div class="callout">
          <div class="callout-title">Formato</div>
          <p class="mono">{UUAA}-{COUNTRY}-JSPRK-{SOURCE_FORMAT | TARGET_SCOPE | SOURCE_ACTION}_{RESULT | INPUT}-V{VERSION}</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-tag"></i> Cat√°logo (ejemplos)</div>
            <ul class="compact">
              <li><b>SOURCE_FORMAT</b>: CSV, DB2, ORA, PGQ, MNG, ELS‚Ä¶</li>
              <li><b>TARGET_SCOPE</b>: LCL, GBL</li>
              <li><b>SOURCE_ACTION</b>: VLD, INS, DEL, UPD, JOI, UNI‚Ä¶</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-note"></i> Ejemplos</div>
            <ul class="compact mono">
              <li>MBGD-MX-JSPRK-DB2_BGDTUMO-V00</li>
              <li>MBGD-MX-JSPRK-CSV_BGDTUMO-V00</li>
              <li>MBGD-MX-JSPRK-LCL_ACCOUNT_MOV-V00</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 29 -->
      <section>
        <h2>Dise√±o de procesos: ‚ÄúDivide y vencer√°s‚Äù</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-scissors"></i> Funcionalidades at√≥micas</div>
            <ul class="compact">
              <li>Formato de archivo</li>
              <li>Uni√≥n de datasets</li>
              <li>Transformaci√≥n</li>
              <li>Validaciones</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-clock"></i> Por qu√©</div>
            <ul class="compact">
              <li>Reprocesamiento m√°s barato (reiniciar 30 min vs 4 horas)</li>
              <li>Mantenimiento m√°s f√°cil</li>
              <li>Pruebas m√°s r√°pidas</li>
              <li>Reutilizaci√≥n de pasos</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 29b -->
      <section>
        <h2>Operaci√≥n: Scheduler (Cronos vs Control-M)</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-calendar"></i> Cronos (no-prod)</div>
            <ul class="compact">
              <li>Gesti√≥n y ejecuci√≥n en ambientes previos</li>
              <li>Guardas el job ‚Üí actualiza versi√≥n (develop) y queda disponible en Ether</li>
              <li>En multipa√≠s puedes desplegar la versi√≥n desde la consola Ether</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-rocket-launch"></i> Control-M (prod)</div>
            <ul class="compact">
              <li>Orquestaci√≥n en producci√≥n</li>
              <li>Env√≠a par√°metros de ejecuci√≥n (InputParams)</li>
              <li>Define calendarios, dependencias, ventanas y reintentos</li>
            </ul>
          </div>
        </div>
        <aside class="notes">
          Menciona que InputParams t√≠picamente viene de Control-M/Cronos.
        </aside>
      </section>

      <!-- 29c -->
      <section>
        <h2>Monitoreo y troubleshooting (c√≥mo piensas en incidentes)</h2>
        <div class="grid-3">
          <div class="card">
            <div class="card-title"><i class="ph ph-activity"></i> Qu√© miras</div>
            <ul class="compact">
              <li>Duraci√≥n por fase</li>
              <li>Errores en Prepare vs Execute</li>
              <li>Shuffles / skew</li>
            </ul>
          </div>
          <div class="card">
            <div class="card-title"><i class="ph ph-magnifying-glass"></i> Pistas</div>
            <ul class="compact">
              <li>Alias afectado</li>
              <li>Target f√≠sico (physicalName)</li>
              <li>Servicio (serviceName)</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-bug-beetle"></i> Errores comunes</div>
            <ul class="compact">
              <li>withColumn() excesivo ‚Üí memoria</li>
              <li>Loops ‚Üí Spark no optimiza DAG</li>
              <li>Datasets intermedios masivos</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 29d -->
      <section>
        <h2>Extra: SQL-only ETL (simplificaci√≥n)</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-file-sql"></i> Caso t√≠pico</div>
            <p>
              Para ETL simple, puedes usar solo SQL y omitir la clase <code>Transformer</code>.
            </p>
            <pre><code class="language-java">TransformConfig.SqlStatements.builder()
  .addSql("sourceAlias1", "TRANSFORM DATA SQL")
  .build();</code></pre>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-lightbulb-filament"></i> Tip</div>
            <p>
              √ötil cuando la transformaci√≥n es ‚Äúselect + cast + filtros‚Äù.
              Si crece la complejidad, migra a Spark API.
            </p>
          </div>
        </div>
      </section>

      <!-- 30 -->
      <section>
        <h2>Mini-quiz (modo entrevista)</h2>
        <div class="quiz">
          <div class="quiz-q">1) ¬øEn qu√© fase se ejecuta el Transformer?</div>
          <div class="quiz-a" data-correct="true">Prepare Transformation</div>
          <div class="quiz-a">Prepare Read</div>
          <div class="quiz-a">Execute</div>

          <div class="quiz-q">2) ¬øQu√© 3 campos comparten los builders de conectores?</div>
          <div class="quiz-a">owner, region, tenant</div>
          <div class="quiz-a" data-correct="true">alias, physicalName, serviceName</div>
          <div class="quiz-a">table, schema, jdbcUrl</div>

          <div class="quiz-q">3) ¬øCu√°l es el uso principal de BTS?</div>
          <div class="quiz-a" data-correct="true">Intercambio temporal de archivos entre jobs</div>
          <div class="quiz-a">Persistencia final de datos hist√≥ricos</div>
          <div class="quiz-a">Cache de Spark √∫nicamente</div>

          <div class="quiz-footer">
            <button class="primary" id="btn-quiz-reset">Reiniciar</button>
            <span class="muted small" id="quiz-status">Tip: haz click en una respuesta.</span>
          </div>
        </div>
        <aside class="notes">
          √ösalo al final para evaluar comprensi√≥n y sonar ‚Äús√≥lido‚Äù en entrevista.
        </aside>
      </section>

      <!-- 31 -->
      <section data-background-gradient="radial-gradient(circle at 50% 20%, rgba(46,212,191,.22), transparent 60%), linear-gradient(135deg, #040b14, #061526 70%, #02060c)">
        <h2>Resumen final</h2>
        <div class="grid-2">
          <div class="card">
            <div class="card-title"><i class="ph ph-flag"></i> Mensajes clave</div>
            <ul class="compact">
              <li>LRBA es un <b>runtime</b> batch dentro de Ether, pensado para estandarizar ejecuci√≥n.</li>
              <li>LRBA Spark usa <b>Apache Spark</b> para paralelismo, escalabilidad y DAG.</li>
              <li>Job = <b>Builder</b> (config) + <b>Transformer</b> (negocio) + alias.</li>
              <li>5 fases: Setup ‚Üí Prepare Read ‚Üí Prepare Transformation ‚Üí Prepare Write ‚Üí Execute.</li>
              <li>Persistencias: <b>BTS</b> (temporal), DB2/Oracle, Mongo/Elastic.</li>
            </ul>
          </div>
          <div class="card subtle">
            <div class="card-title"><i class="ph ph-path"></i> Siguientes pasos</div>
            <ol class="compact">
              <li>Practicar un job ‚Äúend-to-end‚Äù con 1 source + 1 target.</li>
              <li>Agregar un join + agregaci√≥n para ver el DAG en logs.</li>
              <li>Aplicar buenas pr√°cticas (sin loops, sin datasets innecesarios).</li>
            </ol>
            <div class="quote">Gracias. Preguntas üëá</div>
          </div>
        </div>
      </section>

    </div>
  </div>

  <!-- Modal help -->
  <dialog id="help">
    <div class="dialog-head">
      <div class="dialog-title"><i class="ph ph-keyboard"></i> Controles</div>
      <button class="ghost" id="btn-close">Cerrar</button>
    </div>
    <div class="dialog-body">
      <ul class="compact">
        <li><b>F</b> fullscreen ¬∑ <b>S</b> speaker notes</li>
        <li><b>Esc</b> overview</li>
        <li><b>Alt + click</b> zoom</li>
        <li><b>?</b> help (Reveal)</li>
      </ul>
      <p class="muted small">
        Tip: en GitHub Pages funciona igual (todo es est√°tico). Si Mermaid no renderiza, revisa conexi√≥n a CDN.
      </p>
    </div>
  </dialog>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/notes/notes.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/highlight.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

  <script src="assets/app.js"></script>

  <!-- Mermaid render fix for Reveal -->
  <script>
    // Mermaid: no auto-run; we render on Reveal events
    mermaid.initialize({
      startOnLoad: false,
      theme: "dark",
      securityLevel: "loose",
      flowchart: { htmlLabels: true },
      themeVariables: {
        fontFamily: "Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif"
      }
    });

    const renderMermaid = async () => {
      const nodes = document.querySelectorAll("pre.mermaid, .mermaid");
      nodes.forEach(n => n.removeAttribute("data-processed"));
      try {
        await mermaid.run({ querySelector: "pre.mermaid, .mermaid" });
      } catch (e) {
        console.warn("Mermaid render error:", e);
      }
    };

    // Ensure Reveal exists (app.js should initialize Reveal; this just hooks rendering)
    if (window.Reveal) {
      Reveal.on("ready", renderMermaid);
      Reveal.on("slidechanged", renderMermaid);
    } else {
      window.addEventListener("load", renderMermaid);
    }
  </script>
</body>
</html>
```

Si a√∫n te falla **solo en GitHub Pages** pero local se ve bien, el siguiente culpable t√≠pico es **ruta base** (assets) o que Reveal se inicializa tarde en `assets/app.js`.
P√©game tu `assets/app.js` y te lo dejo ‚Äúblindado‚Äù para Pages (incluyendo `hash:true`, `history:true`, y render Mermaid sincronizado con `Reveal.initialize()`).
